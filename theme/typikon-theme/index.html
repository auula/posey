<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<title>{{ book.title }}</title>
	<meta name="description" content="{{ book.description }}" />
	<meta name="keywords"
		content="{{ book.keywords }}" />
	<meta name="generator" content="{{ version }}" />
	<meta name="template" content="typikon-theme" />


	<link rel="stylesheet" href="assets/css/bootstrap.min.css">
	<link rel="stylesheet" href="assets/sidebars.css">
	<!-- Light theme stylesheet -->
	<link rel="stylesheet" href="assets/light-theme.css" id="light-theme">
	<!-- Dark theme stylesheet (initially disabled) -->
	<link rel="stylesheet" href="assets/dark-theme.css" id="dark-theme">
</head>

<body>
	<div class="container">

		<div class="row">

			<div class="col-md-4 col-sm-12">
				<div class="flex-shrink-0 p-2" style="width: 100%;">
					<a href="#"
						class="d-flex align-items-center justify-content-center pb-3 mb-3 link-body-emphasis text-decoration-none border-bottom">
						<span class="fs-4 fw-semibold">{{ book.title }}</span>
					</a>
					<ul class="list-unstyled ps-0">
						<!-- 子章节目录结构，一个数组遍历渲染 -->
						<li class="mb-1">
							<a class="btn d-inline-flex align-items-center rounded border-0">
								{book.chapter.title}
							</a>
							<!-- 每个子章节下面还有其他的文章 -->
							<div class="collapse show" id="collapse1">
								<ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
									<li><a href="#"
											class="link-body-emphasis d-inline-flex text-decoration-none rounded">
											{book.sub_chapters.title}
										</a>
									</li>
								</ul>
							</div>
						</li>

						<li class="border-top my-3"></li>
						<li class="mb-3 mb-md-0 text-body-secondary">© 2024 Company, Inc</li>
					</ul>
				</div>
			</div>

			<div class="col-md-8 col-sm-12">
				<div id="markdown-content">
					{book.page.content}
				</div>
			</div>
		</div>
	</div>

	<script src="assets/js/bootstrap.bundle.js"></script>
	<script src="assets/js/bootstrap.min.js"></script>
	<script src="assets/highlight/highlight.min.js"></script>
	<script src="assets/highlight/languages/shell.min.js"></script>
	<script src="assets/highlight/languages/sql.min.js"></script>
	<script>
		document.addEventListener('DOMContentLoaded', (event) => {

			const darkThemeMediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
			const lightThemeLink = document.getElementById('light-theme');
			const darkThemeLink = document.getElementById('dark-theme');

			changeTheme = (mediaQuery) => {
				if (mediaQuery.matches) {
					// Dark mode
					lightThemeLink.setAttribute('disabled', true);
					darkThemeLink.removeAttribute('disabled');
				} else {
					// Light mode
					darkThemeLink.setAttribute('disabled', true);
					lightThemeLink.removeAttribute('disabled');
				}
			};

			// Initial check
			changeTheme(darkThemeMediaQuery);

			// Listen for changes in OS theme
			darkThemeMediaQuery.addListener(changeTheme);


			// 初始化 highlight.js
			document.querySelectorAll('pre code').forEach((block) => {
				hljs.highlightElement(block);
			});

			// 添加自定义 md-p 样式
			var markdownContent = document.getElementById('markdown-content');
			if (markdownContent) {
				var paragraphs = markdownContent.querySelectorAll('p');
				paragraphs.forEach(function (paragraph) {
					paragraph.classList.add('md-p');
				});
			}

		});

		// 监听系统主题切换操作
		window.onload = () => {
			const darkThemeMediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
			const lightThemeLink = document.getElementById('light-theme');
			const darkThemeLink = document.getElementById('dark-theme');

			changeTheme = (mediaQuery) => {
				if (mediaQuery.matches) {
					// Dark mode
					lightThemeLink.setAttribute('disabled', true);
					darkThemeLink.removeAttribute('disabled');
				} else {
					// Light mode
					darkThemeLink.setAttribute('disabled', true);
					lightThemeLink.removeAttribute('disabled');
				}
			};

			// Initial check
			changeTheme(darkThemeMediaQuery);

			// Listen for changes in OS theme
			darkThemeMediaQuery.addListener(changeTheme);
		};
	</script>

</body>

</html>